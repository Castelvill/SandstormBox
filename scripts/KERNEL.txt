start init false
triggers [on_init]

proc print_instructions 0
proc auto_print_stack 0
proc draw_hitboxes 0
proc print_logical_evaluations 0
proc draw_camera_borders 1
proc draw_text_borders 0
proc window_pos 0 0
proc window_size 600 1080
env window_size 1366 768

load_bitmap "images/amongus1.png" amongus_1
load_bitmap "images/amongus2.png" amongus_2
load_bitmap "images/cobblestone.png" cobblestone
load_bitmap "images/steve.png" steve
load_bitmap "images/arch.jpg" i_use_arch_btw
load_bitmap "images/insanity1.png" insanity1
load_bitmap "images/minion1.png" minion_1
load_bitmap "images/vaporeon.png" vaporeon
load_bitmap "images/h3_dragon.png" dragon_h3
load_bitmap "images/sword.png" sword
load_bitmap "images/chad_doge.png" chad
load_bitmap "images/catgirl.png" puss
load_bitmap "images/rocks2_200.png" rocks2_200
load_bitmap "images/rocks2_300.png" rocks2_300
load_bitmap "images/rocks1_300.png" rocks1_300
load_bitmap "images/lel.png" lel
load_bitmap "images/cat260.png" cat260
load_bitmap "images/catSmall.jpg" catSmall
load_bitmap "images/stars.jpg" background
//load_bitmap "images/Ilulu.jpg" background1
load_bitmap "images/background2.png" background2
load_bitmap "images/background3.png" background3


mkdir "projects"
mkdir "projects/test"
//rename "projects/test" "projects/kaczki"
//remove_all "projects"

new image c me 1 _ _ archImg
fun archImg connect_bitmap_via_alias string [i_use_arch_btw]
//fun archImg connect_bitmap_via_alias string [black]
fun archImg attach_to_camera
value ([window_w]) ww
value ([window_h]) wh
fun archImg resize c ww c wh
new text c me 1 _ _ FPS_text
fun FPS_text set_id string ["king"]
fun FPS_text set_position int [10 10]
fun FPS_text set_size int [400 300]
fun FPS_text set_font string [Minecraft24]
fun FPS_text add_and_update string ["FPS: "]
fun FPS_text set_color double [1.0 0.0 0.0 0.0]
fun FPS_text set_wrapping int [2]
fun FPS_text attach_to_camera
fun FPS_text select_layer int [-1]
fun FPS_text deactivate
/*new primitives c me 1 _ _ PrimiFun
fun PrimiFun set_type string [triangle]
fun PrimiFun add_point double [500.0 100.0]
fun PrimiFun add_point double [1300.0 200.0]
fun PrimiFun add_point double [600.0 1000.0]
fun PrimiFun set_color double [1.0 0.0 0.0 1.0]
fun PrimiFun set_thickness double [10.0]
fun PrimiFun select_layer int [2]
new primitives c me 1 _ _ PrimiFun
fun PrimiFun set_type string [triangle]
fun PrimiFun add_point double [800.0 100.0]
fun PrimiFun add_point double [1300.0 200.0]
fun PrimiFun add_point double [600.0 1000.0]
fun PrimiFun set_color double [0.9 0.0 0.0 0.8]
fun PrimiFun set_thickness double [11.0]
fun PrimiFun select_layer int [2]
new primitives c me 1 _ _ PrimiFun
fun PrimiFun set_type string [circle]
fun PrimiFun add_point double [900.0 400.0]
fun PrimiFun set_color double [0.0 0.0 1.0 1.0]
fun PrimiFun set_thickness double [20.0]
fun PrimiFun set_radius double [350.0]
fun PrimiFun select_layer int [2]
new primitives c me 1 _ _ PrimiFun
fun PrimiFun set_type string [filled_rounded_rectangle]
fun PrimiFun add_point double [920.0 20.0]
fun PrimiFun add_point double [1900.0 500.0]
fun PrimiFun add_point double [30.0 30.0]
fun PrimiFun set_color double [0.0 0.0 0.0 0.5]
fun PrimiFun set_thickness double [10.0]
fun PrimiFun select_layer int [2]
new primitives c me 1 _ _ PrimiFun
fun PrimiFun set_type string [filled_rounded_rectangle]
fun PrimiFun add_point double [920.0 520.0]
fun PrimiFun add_point double [1900.0 1000.0]
fun PrimiFun add_point double [30.0 30.0]
fun PrimiFun set_color double [0.0 0.0 0.0 0.5]
fun PrimiFun set_thickness double [10.0]
fun PrimiFun select_layer int [2]*/

new layer l 1 _ _ L1
fun L1 set_id string [L1]
fun L1 add_group string [kek]
fun L1 activate

new object l L1 1 _ _ Window
fun Window set_can_be_selected bool [0]
new primitives c Window 1 _ _ border
fun border set_id string [primi]
fun border set_type string [filled_rounded_rectangle]
fun border add_point double [0.0 0.0]
fun border add_point double [880 980]
fun border add_point double [20.0 20.0]
fun border set_color double [0.0 0.0 0.0 0.7]
fun border set_thickness double [10.0]
fun border set_samples int [4.0]
fun border select_layer int [0]
fun border set_size int [400 700]
fun border update_with_size
new primitives c Window 1 _ _ border
fun border set_id string [toolbar]
fun border set_type string [filled_rounded_rectangle]
fun border add_point double [0.0 0.0]
fun border add_point double [880 980]
fun border add_point double [20.0 20.0]
fun border set_color double [0.0 0.0 0.0 0.8]
fun border set_thickness double [10.0]
fun border set_samples int [4]
fun border select_layer int [2]
fun border set_size int [400 50]
fun border update_with_size
new text c Window 1 _ _ title
fun title set_id string [title]
fun title set_position int [10 10]
fun title set_font string [arial24]
fun title set_wrapping int [0]
fun title add_and_update string ["Okienko"]
fun title set_size int [400 50]
fun title select_layer int [-1]
fun title set_color double [1.0 1.0 1.0 0.0]
fun title attach_to_camera

new object l L1 1 _ _ NewAmo
fun NewAmo set_id string [Amongus]
fun NewAmo set_position double [0 80]
new image l L1 Amongus 1 _ _ redAstronaut
fun redAstronaut set_id string [amongus]
fun redAstronaut connect_bitmap_via_alias string [minion_1]
fun redAstronaut select_layer int [1]
fun redAstronaut set_scale double [0.6 0.6]
new image l L1 Amongus 1 _ _ insanity
fun insanity set_id string [insanity]
fun insanity connect_bitmap_via_alias string [insanity1]
fun insanity set_position double [100 300]
fun insanity select_layer int [2]
fun insanity set_scale double [0.1 0.1]
fun insanity deactivate
new variable l L1 Amongus 1 _ _ var
fun var set_id string [timer]
fun var set_double double [0.0]
new variable l L1 Amongus 1 _ _ var
fun var set_id string [rot_spd]
fun var set_int int [10]
new variable l L1 Amongus 1 _ _ var
fun var set_id string [xd]
fun var set_int int [0]
new collision l L1 Amongus 1 _ _ col
fun col set_size double [50 50]
new collision l L1 Amongus 1 _ _ col
fun col set_size double [50 50]
fun col set_position double [50 0]
new text l L1 Amongus 1 _ _ text
fun text add_and_update string [""]
fun text set_font string [fira_mono12]
fun text set_color double [1.0 0.0 0.0 0.0]
fun text set_wrapping int [0]
fun text set_size int [2000 2000]
index layer [1 0] _ object Amogus
bind Amogus literal ["scripts/amogus.txt"]
build Amogus true

new object l L1 1 _ _ ObjPar
fun ObjPar set_id string [ObjPar]
fun ObjPar set_position double [600 500]
new image c ObjPar 1 _ _ steveImg
fun steveImg set_id string [lel]
fun steveImg connect_bitmap_via_alias string [steve]
fun steveImg select_layer int [1]
fun steveImg deactivate
new image c ObjPar 1 _ _ insaneImg
fun insaneImg set_id string [insane]
fun insaneImg connect_bitmap_via_alias string [sword]
fun insaneImg select_layer int [2]
fun insaneImg set_scale double [0.1 0.1]
fun insaneImg deactivate
new particles c ObjPar 1 _ _ Particles
fun Particles set_block_spawning bool [true]
fun Particles spawn_on_key_release bool [true]
fun Particles set_spawn_rate int [100 100]
fun Particles set_spawn_cap int [500]
fun Particles set_max_time_to_spawn double [0.05]
fun Particles set_basic_speed double [0.1 10.0]
fun Particles set_speed double [0.1 10.0]
fun Particles set_environment double [0.0 0.0]
fun Particles set_environment_speed double [0.0 0.0]
fun Particles set_acceleration double [0.0 0.0]
fun Particles set_mass double [0.4 0.7]
fun Particles set_directional_degree double [0.0 360.0]
fun Particles set_rotation_speed double [0.0 0.0]
fun Particles set_time_to_negate_rotation double [0.0 0.0]
fun Particles set_radius double [50.0 70.0]
fun Particles set_time_to_death double [3.0 10.0]
fun Particles set_color_intensity double [0.8 1.0]
fun Particles set_shape_rotation_speed double [-2.0 2.0]
fun Particles set_shape int [0]
fun Particles set_use_images bool [true]
fun Particles set_drawing_details bool [false]
fun Particles set_is_static bool [false]
fun Particles bind_key string [p]
fun Particles add_image string [insane]

new layer l 1 _ _ L2
fun L2 set_id string [L2]
fun L2 activate

new object l L2 1 _ _ Terminal
fun Terminal set_position int [0 0]
fun Terminal set_id string [terminal]
fun Terminal set_can_be_selected bool [0]
new text c Terminal 1 _ _ title
fun title set_id string [terminal]
fun title set_position int [10 10]
fun title set_font string [arial24]
fun title set_wrapping int [0]
fun title add_and_update string ["Terminal"]
fun title set_size int [400 50]
fun title select_layer int [1]
fun title set_color double [1.0 1.0 1.0 0.0]
fun title attach_to_camera
fun title set_random_change_speed double [0.1]
fun title set_min_color double [0.2]
new primitives c Terminal 1 _ _ PrimiFun
fun PrimiFun set_id string [primi]
fun PrimiFun set_type string [filled_rounded_rectangle]
fun PrimiFun add_point double [0.0 0.0]
fun PrimiFun add_point double [880 980]
fun PrimiFun add_point double [20.0 20.0]
fun PrimiFun set_color double [0.0 0.0 0.0 0.7]
fun PrimiFun set_thickness double [10.0]
fun PrimiFun set_samples int [4.0]
fun PrimiFun select_layer int [0]
fun PrimiFun set_size int [400 700]
fun PrimiFun update_with_size
new primitives c Terminal 1 _ _ PrimiFun
fun PrimiFun set_id string [toolbar]
fun PrimiFun set_type string [filled_rounded_rectangle]
fun PrimiFun add_point double [0.0 0.0]
fun PrimiFun add_point double [880 980]
fun PrimiFun add_point double [20.0 20.0]
fun PrimiFun set_color double [0.0 0.0 0.0 0.8]
fun PrimiFun set_thickness double [10.0]
fun PrimiFun set_samples int [4]
fun PrimiFun select_layer int [0]
fun PrimiFun set_size int [400 50]
fun PrimiFun update_with_size
new variable c Terminal 1 _ _ Var
fun Var set_int int [0]
new variable c Terminal 1 _ _ input
fun input set_id string ["input"]
fun input set_string string [""]
bind Terminal literal ["scripts/terminal.txt"]
build Terminal true
new editable_text c Terminal 1 _ _ Editable
fun Editable set_id string [edi]
fun Editable set_position int [10 60]
fun Editable set_font string [fira_mono24]
fun Editable set_wrapping int [0]
fun Editable set_editable bool [1]
fun Editable set_space_use bool [1]
fun Editable set_max_content_length int [10000]
string [""] loaded
load_text "randomString.txt" loaded
//print _ context loaded
fun Editable add_and_update context loaded /*string ["Lorem ipsum dolor sit amet, consectetur adipiscing elit,
sed do eiusmod tempor incid idunt ut labore et dolore
magna aliqua. Ut enim ad minim veniam, quis nostrud
exercitation ullamco labori nisi ut aliquip ex ea
commodo consequat."]*/
fun Editable set_size int [1920 1080]
fun Editable select_layer int [1]
fun Editable set_color double [0.0 1.0 0.0 1.0]
fun Editable set_input_delay double [0.3]
fun Editable set_repetition_delay double [0.05]
fun Editable set_vertical_align int [0]
fun Editable set_horizontal_align int [0]
fun Editable set_use_tabs bool [1]
//fun Editable set_rotation double [5]

new camera l 1 _ _ cam
//fun cam set_position int [100 100]
fun cam set_id string [Desktop]
fun cam set_active bool [true]
fun cam resize c ww c wh//[1360 768][1920 1080]
fun cam set_zoom double [1.0]
fun cam set_speed double [20]
fun cam set_key_zoom_in int [15]
fun cam set_key_zoom_out int [21]
fun cam set_zoom_increase double [0.02]
//fun cam set_is_following_object bool [false]
//fun cam follow_layer string [L1]
//fun cam follow_object string [par]
fun cam bind_keys int [15 21 13 9 12 11 10]
fun cam add_visible_layer string [KERNEL]
//fun cam add_accessible_layer string [KERNEL]
//fun cam add_visible_layer string [L1]
//fun cam add_accessible_layer string [L1]
fun cam set_tint double [1.0 1.0 1.0 1.0]
fun cam set_drawing_borders bool [0]
fun cam set_can_interact_with_mouse bool [1]
fun cam set_can_move_with_mouse bool [1]

new camera l 1 _ _ cam
fun cam set_id string [C2]
fun cam set_position int [0 0]
fun cam set_active bool [true]
fun cam resize int [500 400]
fun cam set_zoom double [1.0]
fun cam set_speed double [20]
fun cam set_key_zoom_in int [15]
fun cam set_key_zoom_out int [21]
fun cam set_zoom_increase double [0.01]
fun cam bind_keys int [15 21 13 9 12 11 10]
fun cam add_visible_layer string [L2]
fun cam add_accessible_layer string [L2]
fun cam set_tint double [1.0 1.0 1.0 1.0]
fun cam set_drawing_borders int [0]
fun cam set_can_interact_with_mouse bool [true]
fun cam set_min_size int [200 200]
fun cam pin_to_camera string [Desktop]
fun cam activate_pin
fun cam set_grabbing_area_size int [1000 50]
//fun cam set_keep_inside_screen bool [true]


new camera l 1 _ _ cam
fun cam set_id string [C3]
fun cam set_active bool [true]
fun cam resize int [600 600]
fun cam set_zoom double [1.0]
fun cam set_speed double [20]
fun cam set_key_zoom_in int [15]
fun cam set_key_zoom_out int [21]
fun cam set_zoom_increase double [0.01]
fun cam set_is_following_object bool [false]
//fun cam follow_layer string [L1]
//fun cam follow_object string [par]
fun cam bind_keys int [15 21 13 9 12 11 10]
//fun cam add_visible_layer string [KERNEL]
fun cam add_visible_layer string [L1]
fun cam add_accessible_layer string [L1]
fun cam set_tint double [1.0 1.0 1.0 1.0]
fun cam set_drawing_borders bool [0]
fun cam pin_to_camera string [Desktop]
fun cam activate_pin
fun cam set_relative_position int [600 100]
fun cam set_can_interact_with_mouse bool [true]
fun cam set_grabbing_area_size int [1000 50]
fun cam set_keep_inside_screen bool [false]
//fun cam minimize
//fun cam bring_forward

/*new camera l 1 _ _ cam
fun cam set_active bool [true]
fun cam resize int [200 200]
fun cam set_zoom double [1.0]
fun cam set_speed double [20]
fun cam set_key_zoom_in int [15]
fun cam set_key_zoom_out int [21]
fun cam set_zoom_increase double [0.01]
fun cam set_is_following_object bool [false]
fun cam follow_layer string [L1]
fun cam follow_object string [par]
fun cam bind_keys int [15 21 13 9 12 11 10]
fun cam add_visible_layer string [KERNEL]
fun cam add_visible_layer string [L1]
fun cam add_accessible_layer string [L1]
fun cam set_tint double [1.0 1.0 1.0 1.0]
fun cam set_drawing_borders bool [false]
fun cam pin_to_camera string [C3]
fun cam activate_pin
fun cam set_is_forcefully_pinned bool [true]
fun cam set_relative_position int [100 100]
//fun cam minimize*/

/*new camera l 1 _ _ cam
fun cam set_position int [300 50]
fun cam set_active bool [true]
fun cam resize int [400 500]
fun cam set_zoom double [1.0]
fun cam set_speed double [20]
fun cam set_key_zoom_in int [15]
fun cam set_key_zoom_out int [21]
fun cam set_zoom_increase double [0.01]
fun cam set_is_following_object bool [false]
fun cam follow_layer string [L1]
fun cam follow_object string [par]
fun cam bind_keys int [15 21 13 9 12 11 10]
fun cam add_visible_layer string [KERNEL]
fun cam add_visible_layer string [L1]
fun cam add_accessible_layer string [L1]
fun cam set_tint double [1.0 1.0 1.0 1.0]
fun cam set_drawing_borders int [1]
fun cam set_can_interact_with_mouse bool [true]
fun cam minimize
//fun cam bring_forward
fun cam set_grabbing_area_position int [0 10]
fun cam set_grabbing_area_size int [350 20]*/


int [20] vam
int [10] bam
int [19] vam_l
int [9] bam_l
int [0] i
int [0] j
int [200] size
int [40] const1
int [50] const2
int [0] zero
int [3] break_loop
int [0] cat_i
int [10] catsNum
run [cobblestone_generator_1 spawn_cats]
end

start cobblestone_generator_1 true
if ([context i] [context vam] <)
= j zero
run [cobblestone_generator_2]
end

start cobblestone_generator_2 true
if ([context j] [context bam] <)
run [remove_inside]
post
++ i
end

start remove_inside false
if ([context i] [int 0] == [context j] [int 0] == || [context i] [context vam_l] == || [context j] [context bam_l] == ||)
new object l L1 1 _ _ newCobble
fun newCobble set_id string [22b]
fun newCobble add_group string [cobblestone]
fun newCobble add_group string [wall]
fun newCobble add_group string [hello]
* i size pos_x
+= pos_x const1
* j size pos_y
+= pos_y const2
fun newCobble set_position context pos_x context pos_y
new image c newCobble 1 _ _ cobbleImage
fun cobbleImage connect_bitmap_via_alias string [cobblestone]
fun cobbleImage set_scale double [0.5 0.5]
new collision c newCobble 1 _ _ coll
fun coll set_size int [200 200]
++ j
else break_if_else
end

start break_if_else false
++ j
end

start spawn_cats true
if ([context cat_i] [context catsNum] <)
new object l L1 1 _ _ newCat
fun newCat set_position int [800 300]
new image c newCat 1 _ _ newImage
fun newImage connect_bitmap_via_alias string [steve]
fun newImage resize int [130 130]
new collision c newCat 1 _ _ coll
fun coll set_size int [130 130]

new movement c newCat 1 _ _ newMovement
fun newMovement set_movement_type int [0]
fun newMovement set_input_type int [1]
fun newMovement set_mass double [0.5]
fun newMovement set_walking_speed double [5.0]
fun newMovement set_running_speed double [5.0]
fun newMovement set_friction double [5.0]
fun newMovement set_max_momentum_x double [5.0]
fun newMovement set_move_cooldown double [0.0]
fun newMovement set_diagonal_movement bool [true]

fun newMovement set_jump_speed double [30]
fun newMovement set_allowed_jumps int [2]
fun newMovement set_jump_cooldown double [0.5]
fun newMovement set_gravity double [3.0]
fun newMovement set_momentum_y double [30 20]
fun newMovement set_reset_momentum_when_jumping bool [true]

fun newMovement set_random_actions bool [true]
fun newMovement set_action_time double [0.5 2.0]
fun newMovement set_move_distance double [40.0 70.0]
fun newMovement set_breaks_allowed bool [true]
fun newMovement set_break_chance double [0.1]
++ cat_i
end

/*start reset false
triggers [key_pressed]
if ([key_pressed 18])
index layer [1 0] _ object Amogus
bind Amogus rliteral ["scripts/amogus.txt"]
bind Amogus literal ["scripts/amogus.txt"]
index layer [2 0] _ object Terminal
bind Terminal rliteral ["scripts/terminal.txt"]
bind Terminal literal ["scripts/terminal.txt"]
index context [0 1] [Terminal] variable input
fun input set_string string ["get_input"]
build Terminal true
end*/

start save_editable false
triggers [key_pressed]
if ([key_pressed 23] [key_pressed 217] &&)
value ([object L2 terminal editable_text edi content]) randomString
save_text "randomString.txt" randomString
end


start fs_click false
triggers [key_pressed]
if ([key_pressed 58])
int [1] xd
run [fs]
end

start fs false
if ([fullscreen] !)
env fullscreen 1
else fs_else
end

start fs_else false
env fullscreen 0
end

start refresh false
triggers [on_display_resize]
if([on_display_resize])
value ([window_w]) w
value ([window_h]) h
index context [0 0] [me] image Arch
fun Arch resize c w c h
index camera [0] _ camera Cam0
fun Cam0 resize c w c h
end

start refreshWindows false
triggers [each_iteration]
//C2
value ([camera C2 size_x]) sx
value ([camera C2 size_y]) sy
index layer [2 0 0] _ primitives BackPrimi
fun BackPrimi set_size c sx c sy
fun BackPrimi update_with_size
index layer [2 0 1] _ primitives BackPrimi
int [50] sy
fun BackPrimi set_size c sx c sy
fun BackPrimi update_with_size
index camera [1] _ camera C2
fun C2 set_grabbing_area_size c sx c sy
//C3
value ([camera C3 size_x]) sx
value ([camera C3 size_y]) sy
index layer [1 0 0] _ primitives BackPrimi
fun BackPrimi set_size c sx c sy
fun BackPrimi update_with_size
index layer [1 0 1] _ primitives BackPrimi
int [50] sy
fun BackPrimi set_size c sx c sy
fun BackPrimi update_with_size
index camera [2] _ camera C2
fun C2 set_grabbing_area_size c sx c sy
//?
index layer [2 0 0] _ variable BackVar
++ BackVar
run [rainbow NoRainbow]
end

start rainbow false
if ([context BackVar] [int 1] ==)
int [0] zero
= BackVar zero
//index layer [2 0 0] _ text BackText
//fun BackText increment_random_color
end